# MapReduce基础
## MapReduce简介
MapReduce是一个用于处理海量数据的分布式计算框架。  
这个框架解决了  
- 数据分布式存储  
    MapReduce只负责计算，自身不存储数据；数据是存储在HDFS上的。  
- 作业调度  
	一个Hadoop集群上可以跑很多MR，即可以同时提交多个任务共同执行。集群资源是共享的，集群也是有大小的，不可能在上面跑无数个MR。集群资源被占用到达一定程度时，新的MR任务就会排队（先入先出的队列），不能再集群上运行。当有任务执行完时，才会从队头取新的任务执行。  
- 容错  
	只要不是代码导致的，其他非个人因素的导致失败的问题。（如：服务器挂了、任务挂了、网络不够通畅）集群能帮助识别错误，并切换到无故障的节点。
- 机器间通信等复杂问题  

## MapReduce存储
### 为什么HDFS
- 系统可靠性
- 可扩展性
- 并发处理

![image](480BF6F8FFC144989BEFA093C7F6D2CE)  

### 通常集群都会有三种角色：
  - Master（主节点）：调度工作、分配任务。
  - Slave（从节点）  ：执行任务
  - Client（客户端）  ：让集群做什么任务的  
### 想要读取HDFS上文件的过程：
1. Client向Master发出想要读某一个文件的请求。
2. Master通过查询内部的名单，找到Client想要读取文件的block的位置，然后告诉Client。这样，Client就得到了想要查询的文件的真正位置（在某台slave上）。
3. Client和存放文件的Slave建立联系，然后拿到这些数据。

## MapRedue分而治之思想
- 数钱实例：一堆钞票，各种面值分别是多少  
  - 单点策略  
    - 一个人数所有的钞票，数出各种面值有多少张  
- 分治策略  
每个人分得一堆钞票，数出各种面值有多少张汇总，每个人负责统计一种面值
解决数据可以切割进行计算的应用  
- 分治思想  
（1）分解		（2）求解		（3）合并
- MapReduce映射  
  - 分：map—— 把复杂的问题分解为若干“简单的任务”  
  - 合：reduce  
- 一个很重要的原则——近计算原则  
    是移动计算而不是移动数据（与传统计算不同） 